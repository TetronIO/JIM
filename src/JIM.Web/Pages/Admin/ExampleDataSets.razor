@page "/admin/example-data/datasets"
@attribute [Authorize(Roles = "Administrators")]
@using JIM.Application
@using JIM.Models.DataGeneration
@using JIM.Models.DataGeneration.Dto
@inject JimApplication Jim

<PageTitle>Example Data Sets</PageTitle>
<h1>Example Data Sets</h1>
<p class="light">
    You can quickly populate JIM with example data, as a way to demo, or prototype new features without needing to fuly configure JIM with Connected Systems, Rules Extensions and wait for data to be imported and synchronised etc.
</p>

<div class="box mt-3">

    <ul class="nav nav-pills">
        <li class="nav-item">
            <a class="nav-link" href="/admin/example-data">Templates</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/admin/example-data/sets">Data Sets</a>
        </li>
    </ul>

    <p class="mt-3">
        Example datasets provide the raw values that are used to construct example data in Example Data Templates.
    </p>

    <table class="table mt-2">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Built-in?</th>
                <th scope="col">Culture</th>
                <th scope="col">Values</th>
                <th scope="col">Created</th>
            </tr>
        </thead>
        <tbody>
            @if (datasets != null)
            {
                foreach (var dataset in datasets)
                {
                    <tr>
                        <td>
                            <a href="/admin/example-data/datasets/@(dataset.Id)">@dataset.Name</a>
                        </td>
                        <td>@(dataset.BuiltIn ? "Yes" : "No")</td>
                        <td>@dataset.Culture</td>
                        <td>@dataset.Values</td>
                        <td>@dataset.Created</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>



@code {
    private List<ExampleDataSetHeader>? datasets;

    protected override async Task OnInitializedAsync()
    {
        datasets = await Jim.DataGeneration.GetExampleDataSetHeadersAsync();
    }
}