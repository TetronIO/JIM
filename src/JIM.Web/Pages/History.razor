@page "/history"
@attribute [Authorize(Roles = "Users")]
@using JIM.Application
@using JIM.Models.History
@inject JimApplication Jim

<PageTitle>History</PageTitle>

<MudText Typo="Typo.h4">History Systems</MudText>
<MudText Typo="Typo.subtitle1">
    See what's been happening, here.
</MudText>

@code {
    [Parameter]
    [SupplyParameterFromQuery(Name = "p")]
    public int? Page { get; set; }
    
    private IList<HistoryItem>? historyItems;

    protected override async Task OnParametersSetAsync()
    {
        if (Page == null || Page < 1)
            Page = 1;

        historyItems = await Jim.History.GetHistoryItemsAsync(Page, 20, 500);
    }
}